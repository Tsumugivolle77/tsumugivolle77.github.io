<!DOCTYPE html>
<html lang="en">

<head>

  <!-- Minima -->
  <!-- Hexo theme created by @adisaktijrs -->

  <!-- Basic Page Needs
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <meta charset="utf-8">

  
  <title>SFINAE çš„å‘å±•å²</title>
  
  <link rel="canonical" href="https://tsumugivolle77.github.io/2024/10/25/SFINAE%20%E7%9A%84%E5%8F%91%E5%B1%95%E5%8F%B2/">
  
  <meta name="description" content="SFINAE çš„å‘å±•å²æœ¬æ–‡å†™äº2021å¹´12æœˆï¼Œå‘è¡¨åœ¨æœ¬äººçš„è€åšå®¢å’Œæ ¡ç§‘åçš„ç½‘ç«™ä¸Šï¼›ç°è½¬è½½äºæ­¤ã€‚ å‰è¨€è¯´åˆ° C++ çš„æ¨¡æ¿æŠ€æœ¯ï¼Œæœ‰ä¸€ä¸ªæœ¯è¯­ä¸å¾—ä¸æï¼šSFINAE (è¯»ä½œ Sfee-nayï¼ŒSubstitution Failure is Not An Error )ã€‚è¿™ä¸ªæŠ€æœ¯ä½¿å¾— C++ è¿™æ ·çš„é™æ€è¯­">
  
  
  <meta name="author" content="Offensive 77">
  
  
  
  <meta property="og:site_name" content="Golden Hours" />
  <meta property="og:type" content="article" />
  <meta property="og:title" content="SFINAE çš„å‘å±•å²" />
  
  <meta property="og:description" content="SFINAE çš„å‘å±•å²æœ¬æ–‡å†™äº2021å¹´12æœˆï¼Œå‘è¡¨åœ¨æœ¬äººçš„è€åšå®¢å’Œæ ¡ç§‘åçš„ç½‘ç«™ä¸Šï¼›ç°è½¬è½½äºæ­¤ã€‚ å‰è¨€è¯´åˆ° C++ çš„æ¨¡æ¿æŠ€æœ¯ï¼Œæœ‰ä¸€ä¸ªæœ¯è¯­ä¸å¾—ä¸æï¼šSFINAE (è¯»ä½œ Sfee-nayï¼ŒSubstitution Failure is Not An Error )ã€‚è¿™ä¸ªæŠ€æœ¯ä½¿å¾— C++ è¿™æ ·çš„é™æ€è¯­">
  
  <meta property="og:url" content="https://tsumugivolle77.github.io/2024/10/25/SFINAE%20%E7%9A%84%E5%8F%91%E5%B1%95%E5%8F%B2/" />

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="SFINAE çš„å‘å±•å²">
  
  <meta name="twitter:description" content="SFINAE çš„å‘å±•å²æœ¬æ–‡å†™äº2021å¹´12æœˆï¼Œå‘è¡¨åœ¨æœ¬äººçš„è€åšå®¢å’Œæ ¡ç§‘åçš„ç½‘ç«™ä¸Šï¼›ç°è½¬è½½äºæ­¤ã€‚ å‰è¨€è¯´åˆ° C++ çš„æ¨¡æ¿æŠ€æœ¯ï¼Œæœ‰ä¸€ä¸ªæœ¯è¯­ä¸å¾—ä¸æï¼šSFINAE (è¯»ä½œ Sfee-nayï¼ŒSubstitution Failure is Not An Error )ã€‚è¿™ä¸ªæŠ€æœ¯ä½¿å¾— C++ è¿™æ ·çš„é™æ€è¯­">
  
  
  
  
  <meta name="twitter:url" content="https://tsumugivolle77.github.io/2024/10/25/SFINAE%20%E7%9A%84%E5%8F%91%E5%B1%95%E5%8F%B2/" />

  <!-- Mobile Specific Metas
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Preload fonts
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <link rel="preload" href="/fonts/dm-serif-display-v4-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="/fonts/inter-v2-latin-regular.woff2" as="font" type="font/woff2" crossorigin>

  <!-- CSS
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  
<link rel="stylesheet" href="/css/normalize.css">

  
<link rel="stylesheet" href="/css/skeleton.css">

  
<link rel="stylesheet" href="/css/custom.css">

  
<link rel="stylesheet" href="/css/prism-dark.css">

  
<link rel="stylesheet" href="/css/prism-line-numbers.css">

  <!-- User css -->
  
  
<link rel="stylesheet" href="/css/user.css">

  

  <!-- Favicon
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <link rel="icon" type="image/png" href="/images/favicon.ico">

  <!-- Custom Theme Color Style
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <style>
  a:not(.icon) {
    text-decoration-color: #0FA0CE;
    background-image: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0) 50%,
      #0FA0CE 50%
    );
  }
  blockquote {
    border-left: 8px solid #0FA0CE;
  }
  .nanobar .bar {
    background: #0FA0CE;
  }
  .button.button-primary:hover,
  button.button-primary:hover,
  input[type="submit"].button-primary:hover,
  input[type="reset"].button-primary:hover,
  input[type="button"].button-primary:hover,
  .button.button-primary:focus,
  button.button-primary:focus,
  input[type="submit"].button-primary:focus,
  input[type="reset"].button-primary:focus,
  input[type="button"].button-primary:focus {
    background-color: #0FA0CE;
    border-color: #0FA0CE;
  }
  input[type="email"]:focus,
  input[type="number"]:focus,
  input[type="search"]:focus,
  input[type="text"]:focus,
  input[type="tel"]:focus,
  input[type="url"]:focus,
  input[type="password"]:focus,
  textarea:focus,
  select:focus {
    border: 1px solid #0FA0CE;
  }
</style>

  <!-- Google Analytics (With Privacy Settings On)
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  

  
  <script src="/js/pic.min.js" defer></script>
  

  

<meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Golden Hours" type="application/atom+xml">
</head>

<body>
  <div class="container">
    <div class="row">
      <div>

        <div class="row">
  <div class="two columns" style="max-width: 50px">
    <h1 class="mt-2 mode">
      <div onclick=setDarkMode(true) id="darkBtn">ğŸŒ‘</div>
      <div onclick=setDarkMode(false) id="lightBtn" class=hidden>â˜€ï¸</div>
      <script >
        if (localStorage.getItem('preferredTheme') == 'dark') {
          setDarkMode(true)
        }
        function setDarkMode(isDark) {
          var darkBtn = document.getElementById('darkBtn')
          var lightBtn = document.getElementById('lightBtn')
          if (isDark) {
            lightBtn.style.display = "block"
            darkBtn.style.display = "none"
            localStorage.setItem('preferredTheme', 'dark');
          } else {
            lightBtn.style.display = "none"
            darkBtn.style.display = "block"
            localStorage.removeItem('preferredTheme');
          }
          document.body.classList.toggle("darkmode");
        }
      </script>
    </h1>
  </div>

  <div class="six columns ml-1">
    <h1 class="mt-2">
      Golden Hours
    </h1>
  </div>

  <div class="twelve columns">
    <div class="row">
      <div class="nine columns left">
        <a href="/">Home</a>
        
          
          <a href="/Works" class="ml">Works</a>
          
        
          
          <a href="/About" class="ml">About</a>
          
        
        
          
            <a href="mailto:test@test.test" target="_blank" class="ml">Email</a>
          
        
      </div>
    </div>
    <hr style="margin-bottom: 2.6rem">
  </div>
</div>

        <div class="trans">
            <h2>SFINAE çš„å‘å±•å²</h2>

  <h1 id="SFINAE-çš„å‘å±•å²"><a href="#SFINAE-çš„å‘å±•å²" class="headerlink" title="SFINAE çš„å‘å±•å²"></a>SFINAE çš„å‘å±•å²</h1><p>æœ¬æ–‡å†™äº2021å¹´12æœˆï¼Œå‘è¡¨åœ¨æœ¬äººçš„è€åšå®¢å’Œæ ¡ç§‘åçš„ç½‘ç«™ä¸Šï¼›ç°è½¬è½½äºæ­¤ã€‚</p>
<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è¯´åˆ° C++ çš„æ¨¡æ¿æŠ€æœ¯ï¼Œæœ‰ä¸€ä¸ªæœ¯è¯­ä¸å¾—ä¸æï¼š<strong>SFINAE</strong> (è¯»ä½œ Sfee-nayï¼Œ<strong>S</strong>ubstitution <strong>F</strong>ailure is <strong>N</strong>ot <strong>A</strong>n <strong>E</strong>rror )ã€‚è¿™ä¸ªæŠ€æœ¯ä½¿å¾— C++ è¿™æ ·çš„é™æ€è¯­è¨€åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥å®ç°ç±»ä¼¼åå°„çš„åŠŸèƒ½ (å¯ä»¥æ ¹æ®ç±»å‹çš„ç‰¹å¾ï¼Œè¡¨ç°å‡ºä¸åŒçš„è¡Œä¸º)ã€‚åœ¨ C++20 æ ‡å‡†æ¦‚å¿µåº“å‘å¸ƒä¹‹åï¼Œè®¸å¤šè¿ç”¨åˆ° <strong>SFINAE</strong> æŠ€æœ¯çš„åœºæ™¯éƒ½å¯ä»¥è¢«æ¦‚å¿µå–ä»£ï¼Œè¿™ä¸€å¤è€çš„æŠ€æœ¯ä¹Ÿè®¸ä¹Ÿå°†é€€å‡ºå†å²èˆå°ã€‚</p>
<p>å½“ç„¶ï¼Œè¿™ä¸æ˜¯ä¸€ä»¶å€¼å¾—æ‚²ä¼¤çš„äº‹æƒ…ï¼Œè¿™è¯´æ˜æ ‡å‡†å§”å‘˜ä¼šåœ¨ç§¯æåœ°å¯»æ±‚æ‘†è„±å†å²çš„åŒ…è¢±çš„é€”å¾„ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« æ—¨åœ¨å‘æƒ³è¦äº†è§£ <strong>SFINAE</strong> çš„è¯»è€…ä»‹ç»è¿™ä¸€æŠ€æœ¯çš„å‘å±•å†å²ã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯-SFINAE"><a href="#ä»€ä¹ˆæ˜¯-SFINAE" class="headerlink" title="ä»€ä¹ˆæ˜¯ SFINAE?"></a>ä»€ä¹ˆæ˜¯ <strong>SFINAE</strong>?</h2><p>ä»»ä½•äººï¼Œçœ‹åˆ°é‚£æ ·ä¸€é•¿ä¸²çš„è‹±æ–‡è§£é‡Šï¼Œæˆ–è®¸éƒ½ä¼šæ‡µé€¼ã€‚<strong>æ›¿æ¢å¤±è´¥ä¸æ˜¯ä¸€ä¸ªé”™è¯¯ï¼Ÿ</strong>ä»€ä¹ˆé¬¼ï¼Ÿ</p>
<p>æ›´åŠ å…·ä½“åœ°è¯´ï¼Œè¿™å¥è¯çš„æ„æ€æ˜¯ï¼Œåœ¨<strong>æ¨¡æ¿å®ä¾‹åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œæ›¿æ¢å¤±è´¥ä¸æ˜¯ä¸€ä¸ªé”™è¯¯ã€‚</strong></p>
<h2 id="C-98-çš„åšæ³•"><a href="#C-98-çš„åšæ³•" class="headerlink" title="C++98 çš„åšæ³•"></a>C++98 çš„åšæ³•</h2><p>ä¸‹é¢æˆ‘å°†ä»¥åˆ¤æ–­ä¸€ä¸ªç±»æ˜¯å¦æ‹¥æœ‰ <code>size_t size()</code> æ–¹æ³•ä¸ºä¾‹ï¼Œæ¥æ·±å…¥ <strong>SFINAE</strong>ã€‚</p>
<p>æˆ‘ä»¬å¸Œæœ›ï¼Œå‡å¦‚è¿™ä¸ªç±»æ‹¥æœ‰ <code>size</code> æ–¹æ³•ï¼Œé‚£ä¹ˆå°±è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¦åˆ™ä½¿ç”¨å¦å¤–ä¸€ä¸ªæ³›åŒ–ç‰ˆæœ¬çš„æ–¹æ³•ã€‚</p>
<h3 id="traits"><a href="#traits" class="headerlink" title="traits"></a>traits</h3><p>æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ <code>hasSize</code> ä½œä¸ºç±»çš„ç‰¹å¾ï¼Œå‡å¦‚è¿™ä¸ªç±»æ‹¥æœ‰ <code>size</code> æ–¹æ³•ï¼Œé‚£ä¹ˆ <code>hasSize::value</code> å°†ä¼šæ˜¯ <code>true </code> (æˆ–1)ï¼Œå¦åˆ™ä¸º <code>false</code>ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">hasSize</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Compile-time Boolean</span></span><br><span class="line">    <span class="keyword">typedef</span> <span class="type">char</span> yes;</span><br><span class="line">    <span class="keyword">typedef</span> <span class="type">int</span>  no;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<p><strong>Q:</strong> ä½ ä¸€å®šæ³¨æ„åˆ°äº†ä¸Šé¢çš„ <code>typedef</code>ï¼Œå¹¶ä¸”å¯¹æ­¤æœ‰äº›ä¸è§£ã€‚å®ƒæ˜¯åšä»€ä¹ˆçš„ï¼Ÿ</p>
<p><strong>A:</strong> å®ƒæ˜¯ç”¨æ¥åšç¼–è¯‘æœŸçš„å¯¹é”™åˆ¤æ–­çš„ã€‚</p>
<p><strong>Q:</strong> ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆå†™ï¼Ÿç›´æ¥ç”¨å‡½æ•°è¿”å› <code>true</code> æˆ– <code>false</code> éš¾é“ä¸å¥½å—ï¼Ÿ</p>
<p><strong>A:</strong> ç¡®å®å¥½ï¼Œä½†æ˜¯ C++98 çš„å‡½æ•°è¿”å›å€¼åªèƒ½åœ¨è¿è¡Œæ—¶è·å¾—ã€‚ç›´åˆ° C++11 å¼•å…¥ <code>constexpr</code> ä¹‹åï¼Œè¿™ä¸€é—®é¢˜æ‰å¾—åˆ°æ”¹å–„ã€‚</p>
<p><strong>Q:</strong> é‚£ä¸ºä»€ä¹ˆè¿™ä¹ˆå†™å°±èƒ½è¾¾æˆæˆ‘ä»¬çš„ç›®çš„ï¼Ÿ</p>
<p><strong>A:</strong> æˆ‘ä»¬åº”è¯¥è¿˜è®°å¾— C é‡Œçš„ä¸€ä¸ªè¿ç®—ç¬¦ï¼Œå®ƒé•¿å¾—æœ‰ç‚¹åƒå‡½æ•°ï¼Œä½†ä¸å®ƒæœ‰å…³çš„æ±‚å€¼å´å…¨éƒ½å‘ç”Ÿåœ¨ç¼–è¯‘æœŸã€‚é‚£å°±æ˜¯ <code>sizeof</code>ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> a = <span class="built_in">sizeof</span>(<span class="type">int</span>);</span><br><span class="line"><span class="type">const</span> <span class="type">bool</span> b = <span class="built_in">sizeof</span>(<span class="type">int</span>) == <span class="built_in">sizeof</span>(<span class="type">char</span>);</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ä¸¤ä¸ªèµ‹å€¼è¯­å¥ï¼Œå…¶èµ‹å€¼å·å³è¾¹çš„å€¼å‡å¯ä»¥åœ¨ç¼–è¯‘æœŸæ±‚å¾—ã€‚è€Œçœ‹åˆ°ç¬¬äºŒä¸ªè¯­å¥ï¼Œä½ ä¸€å®šå·²ç»æç„¶å¤§æ‚Ÿã€‚</p>
<p>ä¸‹é¢å°±æ˜¯æˆ‘ä»¬çš„ <strong>SFINAE</strong> ç™»åœºçš„æ—¶å€™äº†ã€‚</p>
<p>æˆ‘ä»¬åœ¨ç»“æ„ä½“å†…åŠ å…¥å¦å¤–ä¸€ä¸ªè„šæ‰‹æ¶ç»“æ„ä½“ <code>reallyHas</code>ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> U, U u&gt; <span class="keyword">struct</span> <span class="title class_">reallyHas</span>;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬åœ¨å‚æ•° <code>U</code> ä¸­å¯ä»¥ç»™å‡ºå‡½æ•°æŒ‡é’ˆçš„ç±»å‹ï¼Œåœ¨å‚æ•° <code>u</code> ä¸­ç»™å‡ºæˆå‘˜å‡½æ•°çš„å…·ä½“åå­—ã€‚</p>
<p>ç„¶åç»™å‡ºä¸¤ä¸ªå‡½æ•° <code>test</code> çš„é‡è½½ç‰ˆæœ¬ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> U,</span><br><span class="line">          <span class="keyword">typename</span> = reallyHas&lt;<span class="built_in">size_t</span>(U::*)() <span class="type">const</span>, &amp;U::size&gt;&gt;</span><br><span class="line"><span class="type">static</span> yes <span class="built_in">test</span>(U) &#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Fallback:</span></span><br><span class="line"><span class="type">static</span> no <span class="built_in">test</span>(...) &#123; &#125;</span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸€ä¸ªç‰ˆæœ¬è¿”å› <code>yes</code>ï¼Œæ¥å— <code>U</code> ç±»å‹çš„å˜é‡ä¸ºå‚æ•°ï¼Œæ¨¡æ¿å‚æ•°åˆ—è¡¨é‡Œç¬¬ä¸€ä¸ªæ˜¯ <code>U</code>ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æˆ‘ä»¬ä¹‹å‰çš„è„šæ‰‹æ¶ <code>reallyHas</code>ã€‚</p>
<p>ç¬¬äºŒä¸ªç‰ˆæœ¬æ¥å—å¯å˜é•¿å‚æ•°ã€‚</p>
<p>åŒ¹é… <code>test</code> ç‰ˆæœ¬çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå‘ç”Ÿè¿™æ ·çš„äº‹ï¼š</p>
<ul>
<li><code>test</code> ä»å‚æ•°ä¸­æ¨å¯¼å‡º <code>U</code> çš„å…·ä½“ç±»å‹ï¼Œä»£å…¥æ¨¡æ¿çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œç„¶åæŠŠæ‰€æœ‰çš„ <code>U</code> æ›¿æ¢æˆè¿™ä¸ªç±»å‹ã€‚</li>
<li>æ›¿æ¢ (Substitution) å®Œæ¯•ï¼Œæ¥ç€ç¼–è¯‘å™¨ä¼šå»æŸ¥æ‰¾å®ä¾‹åŒ–å <code>test</code> ä¸­å’Œæ›¿æ¢å <code>U</code> æœ‰å…³çš„éƒ¨åˆ†ï¼ˆæœ¬ä¾‹ä¸­å°±æ˜¯ <code>size_t(U::*)() const</code> ç±»å‹çš„ <code>&amp;U::size</code>ï¼‰ï¼Œå‡å¦‚å®ƒä»¬ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆè¿™æ¬¡æ›¿æ¢å°±å®£å‘Šå¤±è´¥ (Failure)ã€‚ä½†æ›¿æ¢å¤±è´¥ä¸æ˜¯ä¸€ä¸ªé”™è¯¯ (Error)ï¼Œç¼–è¯‘å™¨ä¼šæ¥ç€åŒ¹é…ï¼Œç›´åˆ°æ‰€æœ‰å€™é€‰åå• (<em>candidates</em>) çš„æˆå‘˜éƒ½ä¸åŒ¹é…ï¼Œæ‰ä¼šæŠ¥é”™ã€‚</li>
<li>éšç€ç¬¬ä¸€ä¸ªåŒ¹é…å¤±è´¥ï¼Œæ¨¡æ¿å»åŒ¹é…å¯å˜é•¿å‚æ•°ç‰ˆæœ¬çš„ <code>test</code>ã€‚è¿™ä¸ªç‰ˆæœ¬æ— è®ºå¦‚ä½•ä¸€å®šèƒ½åŒ¹é…æˆåŠŸï¼Œè€Œå®ƒçš„è¿”å›å€¼ç±»å‹æ˜¯ <code>no</code>ã€‚</li>
</ul>
<p>ç„¶åæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªæšä¸¾å¸¸é‡ <code>value</code> æ¥æ¥å—ç»“æœï¼šï¼ˆC++11 ä¹‹åä¾¿è¢« <code>constexpr</code> å–ä»£ï¼‰</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span></span><br><span class="line">&#123;</span><br><span class="line">    value = <span class="built_in">sizeof</span>(<span class="built_in">test</span>(<span class="built_in">T</span>())) == <span class="built_in">sizeof</span>(yes)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<p>è¿™ä¸€è¿‡ç¨‹ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦å‡½æ•°å…·ä½“çš„è¿”å›å€¼ï¼Œè€Œåªæ˜¯å¯¹è¿”å›å€¼çš„ç±»å‹ä½œæ“ä½œã€‚è¿™å†¥å†¥ä¹‹ä¸­ä¹Ÿå°è¯äº†ä¸€å¥è¯ï¼šC++çš„æ¨¡æ¿æ˜¯ç¼–è¯‘æœŸçš„å¤šæ€ï¼Œæ˜¯ç±»å‹çš„å¤šæ€ï¼ˆæˆ–è€…ä¹Ÿå¯ä»¥è¯´ï¼Œç±»å‹å’Œå€¼æœ¬èº«å¯ä»¥ç­‰ä»·ï¼‰ã€‚</p>
<p>å½“ç„¶ä¸Šé¢çš„å¹¶ä¸æ˜¯æœ€ç»ˆç‰ˆæœ¬ï¼Œå‡å¦‚æˆ‘ä»¬çš„ <code>size</code> æœ‰ä¸¤ç§å¯èƒ½çš„ç‰ˆæœ¬ï¼š</p>
<ul>
<li><code>size_t(U::*)() const</code></li>
<li><code>size_t(U::*)()</code></li>
</ul>
<p>é‚£ä¹ˆæˆ‘ä»¬å°±æ— æ³•ç®€å•ä½¿ç”¨ä¸Šé¢çš„åšæ³•äº†ã€‚</p>
<p>ä¸‹é¢æä¾›ä¸€ç§æ›´åŠ ç®€æ´çš„åšæ³•ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">hasSize</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">typedef</span> <span class="type">char</span> yes;</span><br><span class="line">    <span class="keyword">typedef</span> <span class="type">int</span>  no;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U, U u&gt; <span class="keyword">struct</span> <span class="title class_">reallyHas</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt; <span class="function"><span class="type">static</span> yes <span class="title">test</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">        reallyHas&lt;<span class="type">size_t</span>(U::*)(), &amp;U::size&gt; *)</span> </span>&#123; &#125;</span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt; <span class="function"><span class="type">static</span> yes <span class="title">test</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">        reallyHas&lt;<span class="type">size_t</span>(U::*)() <span class="type">const</span>, &amp;U::size&gt; *)</span> </span>&#123; &#125;</span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">typename</span>&gt; <span class="function"><span class="type">static</span> no <span class="title">test</span><span class="params">(...)</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">enum</span></span><br><span class="line">    &#123;</span><br><span class="line">        value = <span class="built_in">sizeof</span>(<span class="built_in">test</span>&lt;T&gt;(<span class="built_in">int</span>())) == <span class="built_in">sizeof</span>(yes)</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ç”±äº C++ æ•´å½¢å¯ä»¥éšå¼è½¬åŒ–ä¸ºæŒ‡é’ˆï¼Œæˆ‘ä»¬ä»ç„¶ä¼šå…ˆåŒ¹é… <code>yes</code> ç‰ˆæœ¬çš„ <code>test</code>ã€‚</p>
<h3 id="enable-if"><a href="#enable-if" class="headerlink" title="enable_if"></a>enable_if</h3><p>ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨ä¹‹å‰çš„ <code>hasSize</code> æ¥å¸®åŠ©æˆ‘ä»¬å®ç°ç›®çš„ã€‚æˆ‘ä»¬æ¥å¼•å…¥å¦å¤–ä¸€ä¸ªå·¥å…·äººï¼š<code>enable_if</code>ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="type">bool</span>, <span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">enable_if</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">typedef</span> T type;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">enable_if</span>&lt;<span class="literal">false</span>, T&gt;</span><br><span class="line">&#123; &#125;;</span><br></pre></td></tr></table></figure>

<p>çœ‹èµ·æ¥æœ‰ç‚¹æ‡µï¼Ÿä¸çŸ¥é“å®ƒè¦å¹²å˜›ï¼Ÿæˆ‘ä»¬ç»§ç»­å®ç°æˆ‘ä»¬çš„ <code>getSize</code> å‡½æ•°ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">  <span class="keyword">typename</span> enable_if&lt;hasSize&lt;T&gt;::value, <span class="type">size_t</span>&gt;::<span class="function">type</span></span><br><span class="line"><span class="function"><span class="title">getSize</span><span class="params">(<span class="type">const</span> T &amp;obj)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;obj has size&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> obj.<span class="built_in">size</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="comment">/* disable if: */</span></span><br><span class="line">  <span class="keyword">typename</span> enable_if&lt;!hasSize&lt;T&gt;::value, <span class="type">size_t</span>&gt;::<span class="function">type</span></span><br><span class="line"><span class="function"><span class="title">getSize</span><span class="params">(<span class="type">const</span> T &amp;obj)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;obj has no size&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sizeof</span>(obj);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸¤å¤„éƒ½å¾—å†™ä¸Š <code>enable_if</code>ï¼Œå¦åˆ™ä¼šäº§ç”ŸäºŒä¹‰æ€§ã€‚ï¼ˆå¦‚æœå…¶ä¸­ä¸€ä¸ª <code>enable_if</code> çš„å‚æ•°1ä¸º <code>true</code>ï¼Œé‚£ä¹ˆè¿”å›å€¼æ˜¯ <code>size_t</code>ï¼Œé‚£ä¹ˆå¦å¤–ä¸€ä¸ª <code>enable_if</code> å¿…ç„¶æ²¡æœ‰è¿”å›å€¼ï¼Œæ‰€ä»¥å®ƒä¼šè¢«æ’é™¤åœ¨å€™é€‰åå•ä¹‹å¤–ï¼Œå‡å¦‚å¦å¤–ä¸€ä¸ªå‡½æ•°æ‹¥æœ‰è¿”å›å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ç¼–è¯‘å™¨å°†ä¼šä¸æ¸…æ¥šåº”è¯¥è°ƒç”¨å“ªä¸ªç‰ˆæœ¬çš„å‡½æ•°ï¼Œä»è€Œäº§ç”Ÿ errorï¼‰</p>
<p>ä¸‹é¢æ¥è¯•éªŒä¸€ä¸‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">std::vector&lt;<span class="type">int</span>&gt; v = &#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>&#125;;</span><br><span class="line"><span class="type">char</span> c = <span class="string">&#x27;c&#x27;</span>;</span><br><span class="line">std::cout &lt;&lt; <span class="built_in">getSize</span>(v) &lt;&lt; std::endl;</span><br><span class="line">std::cout &lt;&lt; <span class="built_in">getSize</span>(c) &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">obj has size</span><br><span class="line">4</span><br><span class="line">obj has no size</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<h2 id="æ—¶é—´æ¥åˆ°-C-11"><a href="#æ—¶é—´æ¥åˆ°-C-11" class="headerlink" title="æ—¶é—´æ¥åˆ° C++11"></a>æ—¶é—´æ¥åˆ° C++11</h2><p>æˆ‘ä»¬åœ¨è®²è¿° C++98 çš„è§£å†³æ–¹æ³•çš„æ—¶å€™ï¼Œå·²ç»è¯´è¿‡ï¼šè®¸å¤šä¸œè¥¿åˆ°äº† C++11 ä¼šæœ‰æ›´å¥½çš„è§£å†³åŠæ³•ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬ç»ˆäºå¯ä»¥ä»‹ç» C++11 äº†ã€‚</p>
<p>å…¶å®æœ¬æ¥å¹¶æ²¡æœ‰ C++11ï¼Œå®ƒæœ€æ—©çš„åå­—å«åš C++0xï¼Œå› ä¸ºäººä»¬åšä¿¡åœ¨äºŒåä¸€ä¸–çºªçš„å‰åå¹´ C++11 çš„æ ‡å‡†å°±èƒ½å¤Ÿå®ç°ï¼Œç„¶è€Œå®é™…ä¸Šç›´åˆ°2011å¹´ï¼ŒC++11 æ‰æ­£å¼å‘å¸ƒã€‚</p>
<p>C++11 ä¸ºæ¨¡æ¿ç¼–ç¨‹å¸¦æ¥äº†è®¸å¤šçš„ä¾¿åˆ©ã€‚</p>
<ul>
<li>é¦–å…ˆæ˜¯ç¼–è¯‘æœŸè¡¨è¾¾å¼ç±»å‹æ¨å¯¼ <code>decltype</code>ã€‚</li>
<li>æ¥ç€æ˜¯ <code>std::declval</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¨¡æ¿å‡½æ•°ï¼Œå®ƒå…è®¸æˆ‘ä»¬æ„é€ ä¸€ä¸ªç±»å‹ <code>T</code> çš„ä¸´æ—¶é‡ï¼Œè€Œæ— éœ€æˆ‘ä»¬æä¾›å‚æ•°å¯¹å…¶æ„é€ ã€‚</li>
<li>è¿˜æœ‰æˆ‘ä»¬ä¹‹å‰è¯´è¿‡çš„ <code>constexpr</code>ï¼Œä¹Ÿæ˜¯åƒå‘¼ä¸‡å”¤å§‹å‡ºæ¥ã€‚</li>
<li><code>std::enable_if</code>ï¼Œå®ƒè¿›æ ‡å‡†äº†ã€‚</li>
<li>å½“ç„¶è¿˜æœ‰æ–°çš„æ ‡å‡†åº“å¤´æ–‡ä»¶ï¼Œ<code>type_traits</code>ï¼Œå®ƒä¸ºæˆ‘ä»¬æä¾›äº†è®¸è®¸å¤šå¤šæ–¹ä¾¿çš„ <code>traits</code>ï¼Œæˆ‘ä»¬ä¸éœ€è¦å†è‡ªå·±æ‰‹åŠ¨å®ç°äº†ã€‚</li>
</ul>
<p>åœ¨ C++11 ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å¦å¤–ä¸€ä¸ªä¾‹å­â€”â€”åˆ¤æ–­ä¸€ä¸ªç±»æ˜¯å¦æ˜¯å¯ä»¥æ¯”è¾ƒå¤§å°çš„ã€‚(è¿™é‡Œä»¥å°äºå·ä¸ºä¾‹)</p>
<p>æˆ‘ä»¬å†™ä¸€ä¸ªç±»æ¨¡æ¿ <code>isComparable</code>ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">isComparable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt;</span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="keyword">constexpr</span> <span class="type">bool</span> <span class="title">test</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="keyword">decltype</span>(std::declval&lt;U&gt;() &lt; std::declval&lt;U&gt;()) *)</span></span></span><br><span class="line"><span class="function">    </span>&#123; <span class="keyword">return</span> <span class="literal">true</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">typename</span>&gt;</span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="keyword">constexpr</span> <span class="type">bool</span> <span class="title">test</span><span class="params">(...)</span> </span>&#123; <span class="keyword">return</span> <span class="literal">false</span>; &#125;</span><br><span class="line">	<span class="comment">// C++11 initializer list</span></span><br><span class="line">    <span class="type">static</span> <span class="keyword">constexpr</span> <span class="type">bool</span> value &#123; <span class="built_in">test</span>&lt;T&gt;(<span class="built_in">int</span>()) &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>åœ¨  <code>test</code> çš„å‚æ•°ä¸­ç”¨åˆ°äº† <code>decltype</code> å’Œ <code>std::declval</code>ã€‚ç”¨ <code>declval</code> æ¥æŸ¥è¯¢æ˜¯å¦ä¸¤ä¸ª <code>U</code> ç±»å‹çš„å˜é‡é‡è½½äº†ï¼ˆæˆ–è€…æœ¬èº«å°±æ‹¥æœ‰ï¼‰<code>operator&lt;</code>ï¼Œå¦‚æœæ‹¥æœ‰ï¼Œåˆ™åŒ¹é…æˆåŠŸï¼Œå¦åˆ™åŒ¹é…å¤±è´¥ï¼Œå°†ä¼šåŒ¹é…å¯å˜é•¿å‚æ•°ç‰ˆæœ¬çš„ <code>test</code>ã€‚</p>
<p>C++11 ç‰ˆæœ¬ä¸‹æˆ‘ä»¬çš„è®¸å¤šæ“ä½œå˜å¾—æ›´åŠ ç¬¦åˆç›´è§‰ï¼Œå®ç°ä¹Ÿæ›´åŠ ç®€æ´æ˜äº†ã€‚</p>
<p>è¯•éªŒï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Test1</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>&lt;(Test1);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test2</span></span><br><span class="line">&#123; &#125;;</span><br><span class="line"></span><br><span class="line">std::cout &lt;&lt; isComparable&lt;Test1&gt;::value &lt;&lt; std::endl; <span class="comment">// 1</span></span><br><span class="line">std::cout &lt;&lt; isComparable&lt;Test2&gt;::value &lt;&lt; std::endl; <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>



<p>é™¤æ­¤ä¹‹å¤–è¿˜æœ‰å¦ä¸€ç§æ–¹æ³•ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T,</span><br><span class="line">          <span class="keyword">typename</span> = <span class="type">bool</span>&gt;</span><br><span class="line"><span class="keyword">struct</span> isComparable: std::false_type</span><br><span class="line"><span class="comment">// ç»§æ‰¿è€Œæ¥çš„ value æˆå‘˜ä¸º falseï¼Œä¸‹é¢ç±»ä¼¼ã€‚</span></span><br><span class="line">&#123; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">isComparable</span>&lt;</span><br><span class="line">    T, <span class="keyword">decltype</span>(std::<span class="built_in">declval</span>&lt;T&gt;() &lt; std::<span class="built_in">declval</span>&lt;T&gt;())</span><br><span class="line">&gt;: std::true_type</span><br><span class="line">&#123; &#125;;</span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„ <code>isComparable</code> é»˜è®¤å‚æ•°ä¸€å®šè¦è®¾ä¸º <code>bool</code>ï¼Œä¹Ÿå°±æ˜¯ <code>operator&lt;</code> è¿”å›å€¼çš„ç±»å‹ï¼ŒåŸå› æ˜¯ï¼š</p>
<ul>
<li>å½“ç±»æ¨¡æ¿æœ‰é»˜è®¤å‚æ•°çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæ›´åŠ åè¢’é‚£ä¸ªæœ‰é»˜è®¤å‚æ•°çš„æ¨¡æ¿ï¼›</li>
<li>å½“å¸¦æœ‰é»˜è®¤å‚æ•°çš„æ¨¡æ¿ä¸å¦å¤–ä¸€ä¸ªåç‰¹åŒ–æ¨¡æ¿å‚æ•°ä¸€è‡´çš„æ—¶å€™ï¼Œåˆ™ä¼šä¼˜å…ˆé€‰æ‹©é‚£ä¸ªåç‰¹åŒ–çš„ç‰ˆæœ¬ã€‚</li>
</ul>
<p>äºæ˜¯å½“ <code>[T = Test1]</code>ï¼Œåç‰¹åŒ–ç‰ˆæœ¬æ¨¡æ¿çš„ç¬¬äºŒä¸ªå‚æ•°ä¹Ÿæ˜¯ <code>bool</code>ï¼Œäºæ˜¯é€‰æ‹©äº†ç¬¬äºŒä¸ªåç‰¹åŒ–ç‰ˆæœ¬çš„æ¨¡æ¿ã€‚</p>
<p>å½“ <code>[T = Test2]</code>ï¼Œ<strong>SFINAE</strong> çš„è§„åˆ™è®©æˆ‘ä»¬ä¸å¾—ä¸é€‰æ‹©ç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„æ¨¡æ¿ã€‚</p>
<h2 id="C-14-æ³›å‹-lambda"><a href="#C-14-æ³›å‹-lambda" class="headerlink" title="C++14 æ³›å‹ lambda"></a>C++14 æ³›å‹ <code>lambda</code></h2><p>C++14 è®©æˆ‘ä»¬çš„åŒ¿åå‡½æ•°æ”¯æŒ <code>auto</code> ç±»å‹çš„å‚æ•°ã€‚å®ƒçš„æœ¬è´¨å…¶å®å°±æ˜¯å¸¦æœ‰æ¨¡æ¿æ‹¬å·è¿ç®—ç¬¦çš„ä»¿å‡½æ•°ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> f = [] (<span class="keyword">auto</span> x) &#123; <span class="keyword">return</span> x; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// equivalent to:</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Unnamed</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">    <span class="function"><span class="keyword">auto</span> <span class="title">operator</span><span class="params">()</span><span class="params">(T x)</span> </span>&#123; <span class="keyword">return</span> x; &#125;</span><br><span class="line">&#125; functor;</span><br></pre></td></tr></table></figure>

<p>å› æ­¤ <strong>SFINAE</strong> çš„æŠ€æœ¯ä¹Ÿèƒ½å¤Ÿé€‚ç”¨äºå®ƒã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ç”¨æ³›å‹ <code>lambda</code> æ¥å®ç°è¢–çç‰ˆçš„ <code>traits</code>ã€‚</p>
<p>å…ˆä¸Šæ•ˆæœï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="keyword">operator</span>&lt;<span class="params">(B <span class="type">const</span> &amp;)</span> <span class="type">const</span> </span>&#123; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">auto</span> hasLess = <span class="built_in">is_valid</span>([] (<span class="keyword">auto</span> &amp;&amp;x) -&gt; <span class="keyword">decltype</span>(x &lt; x) &#123; &#125;);</span><br><span class="line">std::cout &lt;&lt; std::boolalpha;</span><br><span class="line">std::cout &lt;&lt; <span class="built_in">hasLess</span>(<span class="number">43</span>)  &lt;&lt; std::endl;</span><br><span class="line">std::cout &lt;&lt; <span class="built_in">hasLess</span>(<span class="built_in">A</span>()) &lt;&lt; std::endl;</span><br><span class="line">std::cout &lt;&lt; <span class="built_in">hasLess</span>(<span class="built_in">B</span>()) &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">auto</span> comparableWith = <span class="built_in">is_valid</span>(</span><br><span class="line">    [] (<span class="keyword">auto</span> &amp;&amp;x, <span class="keyword">auto</span> &amp;&amp;y) -&gt; <span class="keyword">decltype</span>(x &lt; y) &#123; &#125;);</span><br><span class="line">std::cout &lt;&lt; <span class="built_in">comparableWith</span>(<span class="number">43</span>, <span class="string">&quot;Abc&quot;</span>s) &lt;&lt; std::endl;</span><br><span class="line">std::cout &lt;&lt; <span class="built_in">comparableWith</span>(<span class="number">43</span>, <span class="number">72.2</span>)   &lt;&lt; std::endl;</span><br><span class="line">std::cout &lt;&lt; <span class="built_in">comparableWith</span>(<span class="built_in">B</span>(), <span class="built_in">B</span>())   &lt;&lt; std::endl;</span><br><span class="line">std::cout &lt;&lt; <span class="built_in">comparableWith</span>(<span class="built_in">A</span>(), <span class="built_in">B</span>())   &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">true</span></span><br><span class="line"><span class="literal">false</span></span><br><span class="line"><span class="literal">true</span></span><br><span class="line"><span class="literal">false</span></span><br><span class="line"><span class="literal">true</span></span><br><span class="line"><span class="literal">true</span></span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ª <code>is_valid</code> æ˜¯ä¸ªå•¥ï¼Œå¥½ç¥å¥‡ã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥è¯¦ç»†è§£é‡Šä¸€ä¸‹ï¼š</p>
<p>é¦–å…ˆï¼Œå®ƒæ˜¯ä¸€ä¸ª<strong>å·¥å‚å‡½æ•°</strong>ã€‚äº§ç”Ÿ <code>is_valid_impl</code> ç±»å‹çš„å¯¹è±¡ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> F&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">is_valid_impl</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    F _f;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Ts&gt;</span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="keyword">constexpr</span> <span class="keyword">auto</span> <span class="title">test</span><span class="params">(Ts&amp;&amp;... ts)</span></span></span><br><span class="line"><span class="function">        -&gt; <span class="title">decltype</span><span class="params">(_f(ts...), <span class="literal">true</span>)</span></span></span><br><span class="line"><span class="function">    </span>&#123; <span class="keyword">return</span> <span class="literal">true</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// fallback</span></span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="keyword">constexpr</span> <span class="type">bool</span> <span class="title">test</span><span class="params">(...)</span></span></span><br><span class="line"><span class="function">    </span>&#123; <span class="keyword">return</span> <span class="literal">false</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">constexpr</span> <span class="keyword">explicit</span> <span class="title">is_valid_impl</span><span class="params">(F &amp;&amp;f)</span>: _f(f) &#123;</span> &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">typename</span>... Us&gt;</span><br><span class="line">    <span class="function"><span class="keyword">constexpr</span> <span class="keyword">auto</span> <span class="title">operator</span><span class="params">()</span><span class="params">(Us&amp;&amp;... us)</span></span></span><br><span class="line"><span class="function">    </span>&#123; <span class="keyword">return</span> <span class="built_in">test</span>(us...); &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> F&gt;</span><br><span class="line"><span class="function">is_valid_impl&lt;F&gt; <span class="title">is_valid</span><span class="params">(F &amp;&amp;f)</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="keyword">return</span> <span class="built_in">is_valid_impl</span>&lt;F&gt;(std::forward&lt;F&gt;(f)); &#125;</span><br></pre></td></tr></table></figure>

<p><code>is_valid_impl</code> çš„å·¥ä½œåŸç†ï¼š</p>
<ul>
<li>ä¾é  <code>is_valid_impl</code> æ„é€ å‡½æ•°æŠŠä»¿å‡½æ•°å¯¹è±¡ <code>_f</code> åˆå§‹åŒ–ã€‚</li>
<li><code>operator()</code> ä»è°ƒç”¨æ—¶çš„å®å‚åˆ—è¡¨æ¨å¯¼å‡ºæ¥ <code>Us...</code> å°†è¿ç®—å§”ä»»ç»™ <code>test</code> å‡½æ•°ã€‚</li>
<li>é¦–å…ˆåŒ¹é…ç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„ <code>test</code>ï¼Œè¿™ä¸ªè¿‡ç¨‹æœ‰ <strong>SFINAE</strong> çš„å‚ä¸ï¼š<code>decltype</code> æ—¶ï¼Œå°†å½¢å‚ä»£å…¥ <code>_f</code>ï¼Œè€Œæˆ‘ä»¬çš„ <code>_f</code> å½¢å¦‚ï¼š<code>[] (auto &amp;&amp;x, auto &amp;&amp;y) -&gt; decltype(x &lt; y) &#123; &#125;</code>ï¼Œå¦‚æœå‚æ•°æ— æ³•è¿›è¡ŒæŸäº›æŒ‡å®šæ“ä½œï¼Œæˆ–è€…å‚æ•°é•¿åº¦ä¸åŒ¹é…ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„ <code>test</code> è¢« <code>SFINAE out</code>ã€‚å¦åˆ™åŒ¹é…æˆåŠŸï¼Œè¿”å› <code>true</code>ã€‚</li>
<li>åŒ¹é…å¤±è´¥ï¼Œè¿™ä¸ªæ—¶å€™å°±è¿›å…¥ç¬¬äºŒä¸ªç‰ˆæœ¬çš„ <code>test</code>ï¼Œå…¶æ— è®ºå¦‚ä½•éƒ½ä¼šè¿”å› <code>false</code>ã€‚</li>
</ul>
<p>ç”±äº C++14 å‚æ•°æ¨å¯¼è¿˜ä¸å¤Ÿæ™ºèƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œ<strong>ä¸å¾—ä¸ä½¿ç”¨</strong>ä¸€ä¸ªå·¥å‚å‡½æ•°æ¥å¸®åŠ©æˆ‘ä»¬æ¨å¯¼ <code>F</code> çš„ç±»å‹ï¼Œè€Œåœ¨åç»­æ ‡å‡†ï¼Œæˆ‘ä»¬å¯ä»¥ä¸å†éœ€è¦è¿™ä¸ªå·¥å‚å‡½æ•°ï¼Œè€Œç›´æ¥ä½¿ç”¨æ„é€ å‡½æ•°äº†ã€‚</p>
<h2 id="C-17-void-t"><a href="#C-17-void-t" class="headerlink" title="C++17 void_t"></a>C++17 void_t</h2><p>C++17 å¼•å…¥äº†ä¸€ä¸ª ç±»æ¨¡æ¿<code>std::void_t</code>ï¼Œå®ƒå¯ä»¥å¹²å•¥å‘¢ï¼Ÿæ¥å—ä¸€é•¿ä¸²çš„ç±»å‹ï¼Œä½†è‡ªå·±æ°¸è¿œæ˜¯ <code>void</code>ã€‚å®ƒå…¶å®å°±æ˜¯ä¸€ä¸ªåˆ«åæ¨¡æ¿ï¼Œé•¿æˆè¿™æ ·ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>...&gt;</span><br><span class="line"><span class="keyword">using</span> <span class="type">void_t</span> = <span class="type">void</span>;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨å¯ä»¥æ–¹ä¾¿åœ°ä½¿ç”¨ <code>decltype</code> + é€—å·è¡¨è¾¾å¼ï¼Œæ¥å®Œæˆä¸€é•¿ä¸²çš„åˆ¤æ–­ï¼Œè€Œæ— éœ€åˆ¤æ–­è¿”å›å€¼ç±»å‹äº†ï¼ˆæœ‰çš„æ—¶å€™è¿”å›å€¼ç±»å‹æ˜¯éš¾ä»¥åˆ¤æ–­çš„ï¼Œæ¯”å¦‚è¿”å›å€¼ç±»å‹å¸¦æœ‰æ¨¡æ¿å‚æ•°ï¼‰ã€‚</p>
<p>ä¸‹é¢ç»™å‡ºä¸€ä¸ªç»ˆæç‰ˆ <code>isComparable</code>ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T,</span><br><span class="line">          <span class="keyword">typename</span> = <span class="type">void</span>&gt;</span><br><span class="line"><span class="keyword">struct</span> isComparable: std::false_type</span><br><span class="line">&#123; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">isComparable</span>&lt;T, std::<span class="type">void_t</span>&lt;<span class="keyword">decltype</span>(</span><br><span class="line">    std::<span class="built_in">declval</span>&lt;T&gt;() &lt; std::<span class="built_in">declval</span>&lt;T&gt;(),</span><br><span class="line">    std::<span class="built_in">declval</span>&lt;T&gt;() &gt; std::<span class="built_in">declval</span>&lt;T&gt;(),</span><br><span class="line">    std::<span class="built_in">declval</span>&lt;T&gt;() &gt;= std::<span class="built_in">declval</span>&lt;T&gt;(),</span><br><span class="line">    std::<span class="built_in">declval</span>&lt;T&gt;() &lt;= std::<span class="built_in">declval</span>&lt;T&gt;(),</span><br><span class="line">    std::<span class="built_in">declval</span>&lt;T&gt;() == std::<span class="built_in">declval</span>&lt;T&gt;(),</span><br><span class="line">    std::<span class="built_in">declval</span>&lt;T&gt;() != std::<span class="built_in">declval</span>&lt;T&gt;())&gt;&gt;: std::true_type</span><br><span class="line">&#123; &#125;;</span><br></pre></td></tr></table></figure>

<h2 id="C-20-concepts"><a href="#C-20-concepts" class="headerlink" title="C++20 concepts"></a>C++20 concepts</h2><p>å¦‚å‰è¨€æ‰€è¯´ï¼ŒC++20 æ¦‚å¿µåº“æˆ–ç»™ <strong>SFINAE</strong> çš„æ—¶ä»£ç”»ä¸Šä¸€ä¸ªå¥å·ã€‚é‚£ä¹ˆæˆ‘ä»¬ä¹Ÿç”¨æ¦‚å¿µé‡å†™çš„ <code>isComparable</code> ä¸ºæœ¬æ–‡ç”»ä¸Šä¸€ä¸ªå¥å·ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">concept</span> is_bool = std::is_convertible_v&lt;T, <span class="type">bool</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">concept</span> isComparable =</span><br><span class="line">  <span class="built_in">requires</span> (T t)</span><br><span class="line">&#123;                            </span><br><span class="line">    &#123;t &gt;  t&#125; -&gt; is_bool; &#123;t &lt;  t&#125; -&gt; is_bool;</span><br><span class="line">    &#123;t &gt;= t&#125; -&gt; is_bool; &#123;t &lt;= t&#125; -&gt; is_bool;</span><br><span class="line">    &#123;t == t&#125; -&gt; is_bool; &#123;t != t&#125; -&gt; is_bool;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">concept</span> isNotComparable = !isComparable&lt;T&gt;;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆä½¿ç”¨ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ä¸åŒçš„æ¦‚å¿µæˆ‘ä»¬å¯ä»¥æä¾›ä¸åŒçš„é‡è½½å‡½æ•°ç‰ˆæœ¬ï¼ˆå³ä¾¿å‚æ•°åˆ—è¡¨ç›¸åŒï¼‰</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">(isComparable <span class="keyword">auto</span>&amp;&amp;)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;is comparable&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">(isNotComparable <span class="keyword">auto</span>&amp;&amp;)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;is not comparable&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> &#123; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">foo</span>(<span class="number">1</span>);</span><br><span class="line"><span class="built_in">foo</span>(<span class="built_in">Test</span>());</span><br></pre></td></tr></table></figure>

<p>ç»“æœï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">is comparable</span><br><span class="line">is not comparable</span><br></pre></td></tr></table></figure>

<p>å½“ç„¶æˆ‘ä»¬å¯ä»¥æŠŠ <code>concepts</code> å’Œä¸Šé¢çš„é‚£äº›ç±»æ¨¡æ¿ç»“åˆèµ·æ¥ï¼Œç”¨æ¥åšç©ºåŸºç±»ä¼˜åŒ–ï¼Œä¸è¿‡é‚£å°±ä¸æ˜¯æœ¬æ–‡è¦è®¨è®ºçš„å†…å®¹äº†ã€‚</p>
<h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>å°½ç®¡æˆ‘æ›¾åœ¨å‰è¨€è¯´è¿‡ï¼Œæˆ‘ä»¬æ¯‹é¡»ä¸º <strong>SFINAE</strong> æŠ€æœ¯çš„é€€å‡ºè€Œæ‚²ä¼¤ï¼Œä½†æˆ‘è®¤ä¸º <strong>SFINAE</strong> æŠ€æœ¯æ˜¯è€ä¸€ä»£ C++ å·¥ç¨‹å¸ˆæ™ºæ…§çš„ç»“æ™¶ã€‚äºŒåå¤šå¹´è¿‡å»ï¼ŒC++ æ ‡å‡†ä»è·›è„šé€æ­¥å¼€å§‹èµ°å‘å®Œå–„ï¼Œä½¿ç”¨ C++ æŠ½è±¡çš„æ–¹æ³•æ—¥è¶‹æˆç†Ÿï¼Œæˆ‘æƒ³è¿™å…¶ä¸­ä¸æ— ä»–ä»¬çš„åŠŸåŠ³ã€‚åœ¨æ¨¡æ¿æŠ€æœ¯å‘å±•çš„è¿‡ç¨‹ä¸­ï¼Œè®¸å¤šä¸œè¥¿éƒ½äº‹å‡ºå¶ç„¶ï¼Œç„¶è€Œå¦‚æœæ²¡æœ‰å‰äººçš„ä¸æ‡ˆå°è¯•ï¼Œè¿™äº›å¶ç„¶åˆæ€ä¼šæˆä¸ºå·²ç»å‘ç”Ÿçš„å¿…ç„¶ï¼Ÿ</p>
<p>å½“ç„¶ï¼Œ<strong>SFINAE</strong> ä½œä¸º C++ æœ¬èº«çš„ä¸€ä¸ªè¯­è¨€è§„åˆ™ï¼Œå®ƒä»ç„¶ä¼šåœ¨åº•å±‚å‘æŒ¥ä½œç”¨ã€‚ä¸å¾—ä¸ç›´æ¥å€šèµ–åº•å±‚çš„ä¸œè¥¿å»è§£å†³ä¸Šå±‚çš„é—®é¢˜ï¼Œè¿™æ˜¯ C++ è¿‡å»çš„ç¼ºé™·ã€‚</p>
<p>äººä»¬å§‹ç»ˆä¸åœåœ°åœ¨æ¢ç´¢è¿™ä¸ªè¯­è¨€çš„æé™ï¼Œæˆ‘æƒ³è¿™æ‰æ˜¯ C++ å¸å¼•äººçš„åœ°æ–¹ã€‚</p>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« èƒ½ç»™è¯»è€…å¸¦æ¥ä¸€ä¸å¯å‘ï¼Œé‚£å°±å†å¥½ä¸è¿‡äº†ã€‚</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><em><strong>Jean Guegant: An introduction to C++â€™s SFINAE concept: compile-time introspection of a class member</strong></em> [<a target="_blank" rel="noopener" href="https://jguegant.github.io/blogs/tech/sfinae-introduction.html]">https://jguegant.github.io/blogs/tech/sfinae-introduction.html]</a> ï¼ˆæˆ‘çš„ <strong>SFINAE</strong> å¯è’™è¯»ç‰©ï¼‰</p>

  <p><a class="classtest-link" href="/tags/C/" rel="tag">C++</a>, <a class="classtest-link" href="/tags/SFINAE/" rel="tag">SFINAE</a>, <a class="classtest-link" href="/tags/templates/" rel="tag">templates</a> â€” Oct 25, 2024</p>
  


        </div>
        <div class="row mt-2">
  <h3>Search</h3>
  <div><input id="search-text" title="search" class="search-text" type="text" placeholder="search......"></div>
  <div style="margin-top: 1.5rem;">
    <ul id="result"></ul>
  </div>
</div>
        <div class="row mt-2">
  
    <div class="eight columns">
      <p id="madewith">Made with â¤ and
        <a class="footer-link icon" href="https://hexo.io" target="_blank" style="text-decoration: none;" rel="noreferrer" aria-label="Hexo.io">
        <svg class="hexo svg-hov" width="14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>Hexo.js</title><path d="M12 .007L1.57 6.056V18.05L12 23.995l10.43-6.049V5.952L12 .007zm4.798 17.105l-.939.521-.939-.521V12.94H9.08v4.172l-.94.521-.938-.521V6.89l.939-.521.939.521v4.172h5.84V6.89l.94-.521.938.521v10.222z"/></svg>
        </a>
        
    </div>

    <!-- Sepcial thanks to https://simpleicons.org/ for the icons -->
    <div class="four columns mb-3 posisi" >
      
      <a class="ml-0 footer-link icon" href="https://github.com/tsumugivolle77" target="_blank" style="text-decoration: none" rel="noreferrer" aria-label="GitHub">
        <svg class="github svg-hov" width="18" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
      </a>
      

      

      
      <a class="ml-0 footer-link icon" href="https://x.com/Offensive771" target="_blank" style="text-decoration: none" rel="noreferrer" aria-label="Twitter">
        <svg class="twitter svg-hov" width="18" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Twitter</title><path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"/></svg>
      </a>
      

      

      

    </div>
  
</div>

      </div>

    </div>

  </div>
  <script src="/js/nanobar.min.js"></script>

  <script>
    var options = {
      classname: 'nanobar',
      id: 'myNanobar'
    };
    var nanobar = new Nanobar(options);
    nanobar.go(30);
    nanobar.go(76);
    nanobar.go(100);
  </script>

</body>

</html>